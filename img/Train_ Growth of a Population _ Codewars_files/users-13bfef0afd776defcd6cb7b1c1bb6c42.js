(function(){App.ns("Controls.Users.ShowController",App.Control({init:function(){this.track("Loaded"),this.infiniteScroll=new App.Controls.InfiniteScroll(".items-list"),App.data.next_rank_color&&App.rapheal(function(e){return function(){var t;t=Math.max(0,Math.min(99.9,App.data.rank_progress+1));if($("#honor_chart").length)return e.chart=Raphael.donutChartStyle1("honor_chart",200,50,t,0,{value1Color:App.consts.colors.ranks[App.data.next_rank_color],backColor:"rgba(255,255,255,0.125)",maxCircleValue:100})}}(this));if(App.data.stats_refreshing)return App.PubSub.register("stats_refresh",App.data.profile.username,App.load),$.get(App.route("check_stats"),function(e){if(e.ready)return App.load({params:{refreshed:!0}})})},events:{".js-reload-action:not(.js-working) click":function(e){return e.text("Working..."),e.addClass("js-working"),$.post(e.data("href"),{},function(e){return App.load()})},"#tell_me_more_referrals click":function(e){return $("#referrals").slideDown(500),e.fadeOut(800),App.track("Referrals Info Clicked",{page:"User Profile"})},"#toggle_relationship click":function(e){return $.post(App.route("toggle_relationship"),function(t){return function(n){if(n.success)return e.find("span").text(n.labelType),n.type==="following"?(t.track("Followed"),e.addClass("is-red-text").removeClass("is-green-text")):(t.track("Un-Followed"),e.addClass("is-green-text").removeClass("is-red-text"))}}(this))},".js-delete-collection click":function(e){return App.confirmModal.show({titleHtml:"Are you sure you want to delete this collection?",messageHtml:"You will not be able to undo this operation. Are you sure?",confirmHtml:"Yes, delete it",confirm:function(){var t;return t=App.route("collection",{id:e.data("collectionId")}),App.Api["delete"](t,null,function(t){return function(t){return e.closest(".list-item").slideUp()}}(this))}})}},track:function(e,t){return t==null&&(t={}),App.data.profile&&(t.profile_isSelf=App.data.profile.isSelf,t.profile_username=App.data.profile.username,t.profile_name=App.data.profile.name,t.profile_clan=App.data.profile.clan),App.track("Profile Page: "+e,t)}})),App.Controls.InvitationController=App.Control({events:{"#send_access_email_link click":function(){var e;return e=$("#user_email").val(),e?App.sendAccessLink(e,"Invitation Page"):alert("Please enter your email address")}}})}).call(this),function(){App.ns("Controls.Users.RankingsController",App.Control({init:function(e,t){return this.trackingName="Honor Leaderboard",$("[data-username='"+App.currentUser.username+"']").addClass("is-current-player"),this.track("Loaded")}}))}.call(this);